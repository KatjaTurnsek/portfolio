import{B,h as p}from"./index-DOOMqhIk.js";(function(){typeof window<"u"&&(window.__routerActive=!0),document.documentElement.classList.add("js-ready");const I="is-active",l=B,w=B.replace(/\/$/,""),u={"/":"home","/work":"work","/about":"about","/contact":"contact"},S=Object.fromEntries(Object.entries(u).map(([e,t])=>[t,e])),P=(e,t=document)=>Array.from(t.querySelectorAll(e)),g=()=>P(".fullscreen-section");function a(e){let t=e;return t.startsWith(l)?t="/"+t.slice(l.length):t.startsWith(w)&&(t="/"+t.slice(w.length)),t.startsWith("/")||(t="/"+t),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t}function f(e){if(e in u)return u[e];if(e.startsWith("/work/")){const o=e.split("/").filter(Boolean),n=o[1],i=o[2];if(!n)return null;const r="case-"+n+(i?"-"+i:"");if(document.getElementById(r))return r}const t=e.slice(1);return t&&document.getElementById(t)?t:null}function h(e){if(e in S)return S[e];if(e.startsWith("case-")){const t=e.slice(5),o=t.indexOf("-");if(o===-1)return"/work/"+t;const n=t.slice(0,o),i=t.slice(o+1);return"/work/"+n+"/"+i}return"/"}function v(){g().forEach(e=>{e.style.removeProperty("display"),e.style.removeProperty("visibility"),e.style.removeProperty("pointer-events"),e.style.removeProperty("transform"),e.style.removeProperty("opacity")})}function b(e){v(),g().forEach(t=>t.classList.toggle("visible",t.id===e))}function A(e){if(!e)return;const t=e.getAttribute("data-title");t&&(document.title=t);const o=e.getAttribute("data-description"),n=document.querySelector('meta[name="description"]');o&&n&&n.setAttribute("content",o);const i=document.querySelector('link[rel="canonical"]');i&&i.setAttribute("href",location.origin+l+h(e.id).replace(/^\//,""))}function E(e){const t=h(e)||a(location.pathname);document.querySelectorAll("nav a").forEach(o=>{let n=!1;try{const i=o.getAttribute("href")||"",r=new URL(i,location.href);n=a(r.pathname)===t}catch{}o.classList.toggle(I,n)})}function T(e,t){const n=(t&&document.getElementById(t)?t:null)||f(e)||u["/"],i=document.getElementById(n);if(!i)return;window.__currentSectionId=n,b(n),A(i),E(n),p(i);const r=h(n);history.replaceState({path:r},"",l+r.replace(/^\//,"")),typeof window.revealSection=="function"&&window.revealSection(n)}function d(e,{replace:t=!1}={}){const o=f(e)||u["/"];window.__currentSectionId=o,b(o);const n=document.getElementById(o);if(n){window.scrollTo({top:0,behavior:"auto"});const s=n.querySelector('h1, h2, h3, [role="heading"]');s&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","-1"),s&&setTimeout(()=>{var c;return(c=s.focus)==null?void 0:c.call(s)},50),A(n),E(o),p(n),typeof window.revealSection=="function"&&window.revealSection(o)}const i={path:e},r=l+e.replace(/^\//,"");t?history.replaceState(i,"",r):history.pushState(i,"",r)}function _(e){const t=location.href,o=()=>window.removeEventListener("popstate",o);window.addEventListener("popstate",o,{once:!0}),history.back(),setTimeout(()=>{if(location.href===t){const n=new URL(e,location.origin),i=a(n.pathname);f(i)?d(i):location.assign(e)}},250)}function q(e){const t=e.target instanceof Element?e.target.closest("a,button"):null;if(!t)return;if(t.hasAttribute("data-back")){e.preventDefault(),_(t instanceof HTMLAnchorElement?t.href:"/");return}if(!(t instanceof HTMLAnchorElement)||t.target&&t.target!=="_self"||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;const o=t.getAttribute("href")||"",n=(t.getAttribute("rel")||"").includes("external"),i=t.classList.contains("no-router"),r=t.hasAttribute("download"),s=/\.[a-z0-9]{2,8}(\?|#|$)/i.test(o);if(n||i||r||s)return;let c;try{c=new URL(o,location.href)}catch{return}if(c.origin!==location.origin)return;const m=c.pathname,k=a(m),y=c.hash?c.hash.slice(1):null,D=m.startsWith(l+"assets/"),W=/\.[a-z0-9]{2,8}$/i.test(m);if(D||W)return;if(y&&document.getElementById(y)){e.preventDefault(),d(h(y),{replace:!1});return}f(k)&&(e.preventDefault(),d(k))}function R(){const e=a(location.pathname);d(e,{replace:!0})}function L(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),v();const e=a(location.pathname),t=location.hash?location.hash.slice(1):null;T(e,t),document.addEventListener("click",q,{passive:!1}),window.addEventListener("popstate",R);const o=()=>{const n=document.querySelector(".fullscreen-section.visible");if(!n||getComputedStyle(n).display==="none"||getComputedStyle(n).visibility==="hidden"||n.style.opacity==="0"){const r=a(location.pathname);requestAnimationFrame(()=>d(r,{replace:!0}))}};window.addEventListener("pageshow",()=>{o();const n=document.querySelector(".fullscreen-section.visible");n&&p(n),setTimeout(o,60)}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&o()})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",L):L()})();
